-- Active: 1725459882056@@127.0.0.1@5432@ejercicio_comprobacion_sesion3
-- Insert data into Cliente

-- This script was generated by the ERD tool in pgAdmin 4.
-- Please log an issue at https://github.com/pgadmin-org/pgadmin4/issues/new/choose if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public.cliente
(
    rut character(10) COLLATE pg_catalog."default" NOT NULL,
    nombre character(120) COLLATE pg_catalog."default" NOT NULL,
    correo character(80) COLLATE pg_catalog."default" NOT NULL,
    direccion character(120) COLLATE pg_catalog."default" NOT NULL,
    celular character(15) COLLATE pg_catalog."default" NOT NULL,
    alta character(1) COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT cliente_pkey PRIMARY KEY (rut)
);

CREATE TABLE IF NOT EXISTS public.empresa
(
    rut character(10) COLLATE pg_catalog."default" NOT NULL,
    nombre character(120) COLLATE pg_catalog."default" NOT NULL,
    direccion character(120) COLLATE pg_catalog."default" NOT NULL,
    telefono character(15) COLLATE pg_catalog."default" NOT NULL,
    correo character(80) COLLATE pg_catalog."default" NOT NULL,
    web character(50) COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT empresa_pkey PRIMARY KEY (rut)
);

CREATE TABLE IF NOT EXISTS public.mantencion
(
    id_mantencion numeric(12, 0) NOT NULL,
    fecha date NOT NULL,
    trabajos_realizados character(1000) COLLATE pg_catalog."default" NOT NULL,
    fk_venta_folio numeric(12, 0) NOT NULL,
    CONSTRAINT mantencion_pkey PRIMARY KEY (id_mantencion)
);

CREATE TABLE IF NOT EXISTS public.marca
(
    id_marca numeric(12, 0) NOT NULL,
    nombre character(120) COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT marca_pkey PRIMARY KEY (id_marca)
);

CREATE TABLE IF NOT EXISTS public.tipo_vehiculo
(
    id_tipovehiculo numeric(12, 0) NOT NULL,
    nombre character(120) COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT tipo_vehiculo_pkey PRIMARY KEY (id_tipovehiculo)
);

CREATE TABLE IF NOT EXISTS public.vehiculo
(
    id_vehiculo numeric(12, 0) NOT NULL,
    patente character(10) COLLATE pg_catalog."default" NOT NULL,
    marca character(20) COLLATE pg_catalog."default" NOT NULL,
    modelo character(20) COLLATE pg_catalog."default" NOT NULL,
    color character(15) COLLATE pg_catalog."default" NOT NULL,
    precio numeric(12, 0) NOT NULL,
    frecuencia_mantencion numeric(5, 0) NOT NULL,
    fk_marca_idmarca numeric(12, 0) NOT NULL,
    fk_tipovehiculo_idtipovehiculo numeric(12, 0) NOT NULL,
    CONSTRAINT vehiculo_pkey PRIMARY KEY (id_vehiculo)
);

CREATE TABLE IF NOT EXISTS public.venta
(
    folio numeric(12, 0) NOT NULL,
    fecha date NOT NULL,
    monto money NOT NULL,
    fk_vehiculo_idvehiculo numeric(12, 0) NOT NULL,
    fk_cliente_rut character(10) COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT venta_pkey PRIMARY KEY (folio)
);

ALTER TABLE IF EXISTS public.mantencion
    ADD CONSTRAINT mantencion_fk_venta_folio_fkey FOREIGN KEY (fk_venta_folio)
    REFERENCES public.venta (folio) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public.vehiculo
    ADD CONSTRAINT vehiculo_fk_marca_idmarca_fkey FOREIGN KEY (fk_marca_idmarca)
    REFERENCES public.marca (id_marca) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public.vehiculo
    ADD CONSTRAINT vehiculo_fk_tipovehiculo_idtipovehiculo_fkey FOREIGN KEY (fk_tipovehiculo_idtipovehiculo)
    REFERENCES public.tipo_vehiculo (id_tipovehiculo) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public.venta
    ADD CONSTRAINT venta_fk_cliente_rut_fkey FOREIGN KEY (fk_cliente_rut)
    REFERENCES public.cliente (rut) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public.venta
    ADD CONSTRAINT venta_fk_vehiculo_idvehiculo_fkey FOREIGN KEY (fk_vehiculo_idvehiculo)
    REFERENCES public.vehiculo (id_vehiculo) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;

END;
INSERT INTO public.cliente (rut, nombre, correo, direccion, celular, alta) VALUES
('123456789', 'Juan Pérez', 'juan.perez@example.com', 'Calle Falsa 123', '987654321', 'Y'),
('987654321', 'María González', 'maria.gonzalez@example.com', 'Avenida Siempre Viva 742', '912345678', 'Y'),
('111111111', 'Pedro López', 'pedro.lopez@example.com', 'Pasaje del Amor 5', '998877665', 'N');

-- Insert data into Empresa
INSERT INTO public.empresa (rut, nombre, direccion, telefono, correo, web) VALUES
('222222222', 'Auto Import S.A.', 'Ruta 5 Sur', '123456789', 'contacto@autoimport.cl', 'www.autoimport.cl'),
('333333333', 'Servicios Automotrices Ltda.', 'Calle de los Autos 45', '987654321', 'info@serviciosautomotrices.cl', 'www.serviciosautomotrices.cl');

-- Insert data into Marca
INSERT INTO public.marca (id_marca, nombre) VALUES
(1, 'Toyota'),
(2, 'Ford'),
(3, 'Chevrolet');

-- Insert data into Tipo_Vehiculo
INSERT INTO public.tipo_vehiculo (id_tipovehiculo, nombre) VALUES
(1, 'Sedán'),
(2, 'SUV'),
(3, 'Pickup');

-- Insert data into Vehiculo
INSERT INTO public.vehiculo (id_vehiculo, patente, marca, modelo, color, precio, frecuencia_mantencion, fk_marca_idmarca, fk_tipovehiculo_idtipovehiculo) VALUES
(1, 'ABC123', 'Toyota', 'Corolla', 'Blanco', 15000000, 6, 1, 1),
(2, 'DEF456', 'Ford', 'Explorer', 'Negro', 25000000, 12, 2, 2),
(3, 'GHI789', 'Chevrolet', 'Silverado', 'Rojo', 30000000, 12, 3, 3);

-- Insert data into Venta
INSERT INTO public.venta (folio, fecha, monto, fk_vehiculo_idvehiculo, fk_cliente_rut) VALUES
(1, '2024-01-15', '15000000', 1, '123456789'),
(2, '2024-02-20', '25000000', 2, '987654321'),
(3, '2024-03-05', '30000000', 3, '111111111');

-- Insert data into Mantencion
INSERT INTO public.mantencion (id_mantencion, fecha, trabajos_realizados, fk_venta_folio) VALUES
(1, '2024-02-01', 'Cambio de aceite y revisión de frenos', 1),
(2, '2024-03-01', 'Reemplazo de filtro de aire', 2),
(3, '2024-04-01', 'Revisión completa del vehículo', 3);

-- Insert vehicles that have not been sold
INSERT INTO public.vehiculo (id_vehiculo, patente, marca, modelo, color, precio, frecuencia_mantencion, fk_marca_idmarca, fk_tipovehiculo_idtipovehiculo) VALUES
(4, 'JKL012', 'Toyota', 'Camry', 'Gris', 16000000, 6, 1, 1),
(5, 'MNO345', 'Ford', 'F-150', 'Azul', 28000000, 12, 2, 3),
(6, 'PQR678', 'Chevrolet', 'Tahoe', 'Plata', 35000000, 12, 3, 2),
(7, 'STU901', 'Toyota', 'RAV4', 'Verde', 22000000, 6, 1, 2),
(8, 'VWX234', 'Ford', 'Mustang', 'Amarillo', 40000000, 12, 2, 1);

INSERT INTO public.venta (folio, fecha, monto, fk_vehiculo_idvehiculo, fk_cliente_rut) VALUES
(4, '2024-04-10', 16000000, 4, '123456789'),
(5, '2024-04-20', 28000000, 5, '987654321'),
(6, '2024-05-05', 35000000, 6, '111111111'),
(7, '2024-05-15', 22000000, 7, '123456789'),
(8, '2024-06-01', 40000000, 8, '987654321'),
(9, '2024-06-10', 42000000, 9, '111111111'),
(10, '2024-07-01', 32000000, 10, '123456789'),
(11, '2024-07-10', 29000000, 11, '987654321'),
(12, '2024-07-20', 38000000, 12, '111111111'),
(13, '2024-08-01', 21000000, 13, '123456789'),
(14, '2024-08-10', 45000000, 14, '987654321');

INSERT INTO public.vehiculo (id_vehiculo, patente, marca, modelo, color, precio, frecuencia_mantencion, fk_marca_idmarca, fk_tipovehiculo_idtipovehiculo) VALUES
(9, 'YZA456', 'Chevrolet', 'Camaro', 'Naranja', 42000000, 12, 3, 1),
(10, 'BCD789', 'Toyota', 'Hilux', 'Negro', 32000000, 6, 1, 3),
(11, 'EFG012', 'Ford', 'Ranger', 'Blanco', 29000000, 12, 2, 3),
(12, 'HIJ345', 'Chevrolet', 'Traverse', 'Azul', 38000000, 12, 3, 2),
(13, 'KLM678', 'Toyota', 'Prius', 'Verde', 21000000, 6, 1, 1),
(14, 'NOP901', 'Ford', 'Bronco', 'Rojo', 45000000, 12, 2, 2);

INSERT INTO public.vehiculo (id_vehiculo, patente, marca, modelo, color, precio, frecuencia_mantencion, fk_marca_idmarca, fk_tipovehiculo_idtipovehiculo) VALUES
(15, 'QRS345', 'Toyota', 'Land Cruiser', 'Negro', 45000000, 6, 1, 2),
(16, 'TUV678', 'Ford', 'Edge', 'Blanco', 31000000, 12, 2, 2),
(17, 'WXY901', 'Chevrolet', 'Malibu', 'Gris', 33000000, 12, 3, 1),
(18, 'ZAB234', 'Toyota', 'Avalon', 'Azul', 34000000, 6, 1, 1),
(19, 'CDE567', 'Ford', 'EcoSport', 'Rojo', 28000000, 12, 2, 2),
(20, 'FGH890', 'Chevrolet', 'Suburban', 'Plata', 50000000, 12, 3, 2),
(21, 'IJK123', 'Toyota', 'Yaris', 'Verde', 17000000, 6, 1, 1),
(22, 'LMN456', 'Ford', 'Fusion', 'Amarillo', 29000000, 12, 2, 1);
